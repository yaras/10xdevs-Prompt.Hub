@page "/my-prompts"
@rendermode InteractiveServer

@using MudBlazor
@using PromptHub.Web.Application.Models.Prompts
@using PromptHub.Web.Components.Prompts

<MudContainer MaxWidth="MaxWidth.False" Class="pt-4">
    <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween">
        <MudText Typo="Typo.h4">My prompts</MudText>
    </MudStack>

    @if (!string.IsNullOrWhiteSpace(this.ErrorMessage))
    {
        <MudAlert Severity="Severity.Error" Dense="true" Class="mt-4">@this.ErrorMessage</MudAlert>
    }
    else if (this.IsLoading)
    {
        <MudStack Class="mt-8" AlignItems="AlignItems.Center" Justify="Justify.Center">
            <MudProgressCircular Indeterminate="true" Color="Color.Primary" Size="Size.Large" />
        </MudStack>
    }
    else if (this.Prompts.Count == 0)
    {
        <MudStack Class="mt-8" Spacing="2" AlignItems="AlignItems.Center">
            <MudText Typo="Typo.h6">No prompts yet</MudText>
            <MudText Color="Color.Secondary">Create your first prompt to start sharing and reusing ideas.</MudText>
            <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="this.OpenCreateDialogAsync">Create prompt</MudButton>
        </MudStack>
    }
    else
    {
        <MudGrid Class="mt-4">
            @foreach (var prompt in this.Prompts)
            {
                <MudItem xs="12" sm="6" md="4" lg="3" @key="prompt.PromptId">
                    <PromptCard Prompt="prompt" CurrentUserAuthorId="this.CurrentUserAuthorId" ShowEdit="true" OnEdit="this.OpenEditDialogAsync" OnView="this.OpenViewDialogAsync" />
                </MudItem>
            }
        </MudGrid>

        @if (this.CanLoadMore)
        {
            <MudStack Class="mt-6" AlignItems="AlignItems.Center">
                <MudButton Variant="Variant.Outlined" OnClick="this.LoadMoreAsync" Disabled="this.IsLoadingMore">Load more</MudButton>
            </MudStack>
        }
    }

    <MudFab 
            Style="position: fixed; right: 1.5rem; bottom: 1.5rem; z-index: 1000;"
            Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add"
            OnClick="this.OpenCreateDialogAsync" />
</MudContainer>
